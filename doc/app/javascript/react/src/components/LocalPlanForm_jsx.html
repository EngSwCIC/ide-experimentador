<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>LocalPlanForm.jsx - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../../../../";
  var index_rel_prefix = "../../../../../";
</script>

<script src="../../../../../js/navigation.js" defer></script>
<script src="../../../../../js/search.js" defer></script>
<script src="../../../../../js/search_index.js" defer></script>
<script src="../../../../../js/searcher.js" defer></script>
<script src="../../../../../js/darkfish.js" defer></script>

<link href="../../../../../css/fonts.css" rel="stylesheet">
<link href="../../../../../css/rdoc.css" rel="stylesheet">


<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../../../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../../../../table_of_contents.html#pages">Pages</a>
    <a href="../../../../../table_of_contents.html#classes">Classes</a>
    <a href="../../../../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search (/) for a class, method, ..." spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="project-metadata">
    
<div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
    <li><details open><summary>app</summary>
    <ul class="link-list">
      <li><a href="../../../../../app/assets/builds/CreatLocalPlan-278bd5ba286e8195_css.html">CreatLocalPlan-278bd5ba286e8195.css</a>
      <li><a href="../../../../../app/assets/builds/application_js.html">application.js</a>
      <li><a href="../../../../../app/assets/builds/application_js_map.html">application.js.map</a>
      <li><a href="../../../../../app/assets/builds/application_tailwind-170e0db68e2e7e54_css.html">application.tailwind-170e0db68e2e7e54.css</a>
      <li><a href="../../../../../app/assets/builds/creatLocalPlan-278bd5ba286e8195_css.html">creatLocalPlan-278bd5ba286e8195.css</a>
      <li><a href="../../../../../app/assets/builds/creatLocalPlan-8bcb92643586278c_css.html">creatLocalPlan-8bcb92643586278c.css</a>
      <li><a href="../../../../../app/assets/builds/tailwind_css.html">tailwind.css</a>
      <li><a href="../../../../../app/assets/config/manifest_js.html">manifest.js</a>
      <li><a href="../../../../../app/assets/stylesheets/application_css.html">application.css</a>
      <li><a href="../../../../../app/assets/stylesheets/application_tailwind_css.html">application.tailwind.css</a>
      <li><a href="../../../../../app/javascript/application_js.html">application.js</a>
      <li><a href="../../../../../app/javascript/controllers/application_js.html">application.js</a>
      <li><a href="../../../../../app/javascript/controllers/hello_controller_js.html">hello_controller.js</a>
      <li><a href="../../../../../app/javascript/controllers/index_js.html">index.js</a>
      <li><a href="../../../../../app/javascript/react/src/components/AlertDialog_tsx.html">AlertDialog.tsx</a>
      <li><a href="../../../../../app/javascript/react/src/components/Graph_jsx.html">Graph.jsx</a>
      <li><a href="../../../../../app/javascript/react/src/components/Hello_jsx.html">Hello.jsx</a>
      <li><a href="../../../../../app/javascript/react/src/components/LocalPlanForm_jsx.html">LocalPlanForm.jsx</a>
      <li><a href="../../../../../app/javascript/react/src/index_js.html">index.js</a>
      <li><a href="../../../../../app/javascript/react/src/pages/CreateLocalPlan_jsx.html">CreateLocalPlan.jsx</a>
      <li><a href="../../../../../app/javascript/react/src/utils_ts.html">utils.ts</a>
      <li><a href="../../../../../app/javascript/react/src/wrapWithQueryProvider_jsx.html">wrapWithQueryProvider.jsx</a>
    </ul></details>
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page app/javascript/react/src/components/LocalPlanForm.jsx">

<p>import React, { useState, useEffect } from “react”; import styled from “styled-components”;</p>

<p>const StepDiv = styled.div` display: flex; flex-direction: column; gap: 0.5rem; width: 100%; padding: 2rem; width: 50%; ‘;</p>

<p>const ParameterDiv = styled.div` margin-left: 2rem; margin-top: 0.5rem; display: flex; flex-direction: column; border-left: 2px solid black; padding-left: 0.5rem; padding-top: 0.5rem; gap: 1rem; items-align: start; ‘;</p>

<p>const TitleParameterDiv = styled.div` color: #808080; ‘;</p>

<p>const RoomDiv = styled.div` display: flex; justify-content: space-between; gap: 3rem; align-items: center; width: 50%; ‘;</p>

<p>const RoomContentDiv = styled.div` display: flex; flex-direction: column; gap: 0.5rem; ‘;</p>

<p>const NavDiv = styled.div` display: flex; flex-direction: column; gap: 1rem; margin-left: 2rem; padding-bottom: 1rem; ‘;</p>

<p>const WaypointsContentDiv = styled.div` display: flex; flex-direction: column; margin-left: 2rem; width: 60%; gap: 0.5rem; ‘;</p>

<p>const WaypointsDiv = styled.div` display: flex; flex-direction: column; gap: 2rem; ‘;</p>

<p>const WaypointDiv = styled.div` width: 100%; ‘;</p>

<p>const LocalPlanForm = ({ step, stepIndex, onRemove, onChange }) =&gt; {</p>

<pre>const [selectedSkill, setSelectedSkill] = useState(&quot;&quot;);
const [formParams, setFormParams] = useState({
  skill: &quot;&quot;,
  label: &quot;&quot;,
  parameter: {},
});

useEffect(() =&gt; {
  setFormParams(step);
  setSelectedSkill(step.skill);
}, [step]);

const handleSkillChange = (e) =&gt; {
  const _skill = e.target.value;
  const updatedParams = { ...formParams, skill: _skill, parameter: {} };
  if(_skill === &quot;navigation&quot;) {
    updatedParams.parameter = { room: &quot;&quot;, waypoints: [] };
  }
  onChange(stepIndex, updatedParams);
  setSelectedSkill(_skill);
  setFormParams(updatedParams);
};

const handleActionChange = (e) =&gt; {
  const action = e.target.value;
  onChange(stepIndex, {
    ...formParams,
    parameter: {
      ...formParams.parameter,
      action: action,
    },
  });
  setFormParams((prevParams) =&gt; ({
    ...prevParams,
    parameter: {
      ...prevParams.parameter,
      action: action,
    },
  }));
};

const handleLabelChange = (e) =&gt; {
  const { value } = e.target;
  onChange(stepIndex, { ...formParams, label: value });
  setFormParams((prevParams) =&gt; ({
    ...prevParams,
    label: value,
  }));
};

const handleInputChange = (name, value) =&gt; {
  onChange(stepIndex, {
    ...formParams,
    parameter: {
      ...formParams.parameter,
      [name]: value,
    },
  });
  setFormParams((prevParams) =&gt; ({
    ...prevParams,
    parameter: {
      ...prevParams.parameter,
      [name]: value,
    },
  }));
};

const handleWaypointChange = (index, coord, value) =&gt; {
  onChange(stepIndex, {
    ...formParams,
    parameter: {
      ...formParams.parameter,
      waypoints: formParams.parameter.waypoints.map((waypoint, i) =&gt;
        i === index ? { ...waypoint, [coord]: value } : waypoint
      ),
    },
  });
  setFormParams((prevParams) =&gt; ({
    ...prevParams,
    parameter: {
      ...prevParams.parameter,
      waypoints: prevParams.parameter.waypoints.map((waypoint, i) =&gt;
        i === index ? { ...waypoint, [coord]: value } : waypoint
      ),
    },
  }));
};

const handleAddWaypoint = () =&gt; {
  onChange(stepIndex, {
    ...formParams,
    parameter: {
      ...formParams.parameter,
      waypoints: [
        ...(formParams.parameter.waypoints || []),
        { x: &quot;&quot;, y: &quot;&quot;, z: &quot;&quot; },
      ],
    },
  });
  setFormParams((prevParams) =&gt; ({
    ...prevParams,
    parameter: {
      ...prevParams.parameter,
      waypoints: [
        ...(prevParams.parameter.waypoints || []),
        { x: &quot;&quot;, y: &quot;&quot;, z: &quot;&quot; },
      ],
    },
  }));
};

const handleRemoveWaypoint = () =&gt; {
  onChange(stepIndex, {
    ...formParams,
    parameter: {
      ...formParams.parameter,
      waypoints: formParams.parameter.waypoints.slice(0, -1),
    },
  });
  setFormParams((prevParams) =&gt; {
    const waypoints = prevParams.parameter.waypoints || [];
    waypoints.pop(); // Remove the last waypoint
    return {
      ...prevParams,
      parameter: { ...prevParams.parameter, waypoints },
    };
  });
};

const handleRemove = () =&gt; {
  onRemove(stepIndex);
};

const renderFormInputs = () =&gt; {
  return (
    &lt;StepDiv&gt;
      &lt;button onClick={handleRemove}&gt;Deletar passo&lt;/button&gt;
      &lt;label htmlFor=&quot;labelInput&quot;&gt;Nome da passo:&lt;/label&gt;
      &lt;input
        style={{ borderRadius: &quot;6px&quot;, padding: &quot;8px&quot; }}
        id=&quot;labelInput&quot;
        type=&quot;text&quot;
        placeholder=&quot;Nome&quot;
        value={formParams.label || &quot;&quot;}
        onChange={handleLabelChange}
      /&gt;
      &lt;label htmlFor=&quot;skillSelect&quot;&gt;Selecione uma habilidade:&lt;/label&gt;
      &lt;select
        id=&quot;skillSelect&quot;
        style={{ borderRadius: &quot;6px&quot;, padding: &quot;8px&quot; }}
        value={formParams.skill || &quot;&quot;}
        onChange={handleSkillChange}
      &gt;
        &lt;option value=&quot;&quot;&gt;Habilidade&lt;/option&gt;
        &lt;option value=&quot;navigation&quot;&gt;Navegação&lt;/option&gt;
        &lt;option value=&quot;operate_drawer&quot;&gt;Operar gaveta&lt;/option&gt;
        &lt;option value=&quot;approach_person&quot;&gt;Aproximar-se de uma pessoa&lt;/option&gt;
        &lt;option value=&quot;approach_robot&quot;&gt;Aproximar-se de um robo&lt;/option&gt;
        &lt;option value=&quot;authenticate_person&quot;&gt;Autentificar pessoa&lt;/option&gt;
      &lt;/select&gt;
      {renderFormInputsForSkill()}
    &lt;/StepDiv&gt;
  );
};

const renderFormInputsForSkill = () =&gt; {
  const key = selectedSkill === &quot;operate_drawer&quot; ? &quot;action&quot; : &quot;topic&quot;;
  if (selectedSkill === &quot;navigation&quot;) {
    return (
      &lt;ParameterDiv&gt;
        &lt;TitleParameterDiv&gt;
          &lt;span&gt;Parâmetros da habilidade&lt;/span&gt;
        &lt;/TitleParameterDiv&gt;

        &lt;NavDiv&gt;
          &lt;RoomDiv&gt;
            &lt;RoomContentDiv&gt;
              &lt;span&gt;Local de objetivo&lt;/span&gt;
              &lt;input
                style={{ borderRadius: &quot;6px&quot;, padding: &quot;8px&quot; }}
                type=&quot;text&quot;
                placeholder=&quot;Sala&quot;
                onChange={(e) =&gt; handleInputChange(&quot;room&quot;, e.target.value)}
                value={formParams.parameter.room || &quot;&quot;}
              /&gt;
            &lt;/RoomContentDiv&gt;
            &lt;button onClick={handleAddWaypoint}&gt;Adicionar waypoint&lt;/button&gt;
          &lt;/RoomDiv&gt;
          &lt;span&gt;Passos para chegar lá&lt;/span&gt;
          &lt;WaypointsDiv&gt;{renderWaypointInputs()}&lt;/WaypointsDiv&gt;
          &lt;button onClick={handleRemoveWaypoint}&gt;
            Remover último waypoint
          &lt;/button&gt;
        &lt;/NavDiv&gt;
      &lt;/ParameterDiv&gt;
    );
  } else if (
    selectedSkill === &quot;approach_person&quot; ||
    selectedSkill === &quot;approach_robot&quot; ||
    selectedSkill === &quot;authenticate_person&quot;
  ) {
    return (
      &lt;ParameterDiv&gt;
        &lt;TitleParameterDiv&gt;
          &lt;span&gt;Parâmetros da habilidade&lt;/span&gt;
        &lt;/TitleParameterDiv&gt;

        &lt;NavDiv&gt;
          &lt;input
            style={{ borderRadius: &quot;0.375rem&quot;, padding: &quot;0.5rem&quot; }}
            type=&quot;text&quot;
            value={formParams.parameter[key] || &quot;&quot;}
            placeholder=&quot;Tópico&quot;
            onChange={(e) =&gt; handleInputChange(key, e.target.value)}
          /&gt;
        &lt;/NavDiv&gt;
      &lt;/ParameterDiv&gt;
    );
  } else if (&quot;operate_drawer&quot; === selectedSkill) {
    return (
      &lt;ParameterDiv&gt;
        &lt;TitleParameterDiv&gt;
          &lt;span&gt;Parâmetros da habilidade&lt;/span&gt;
        &lt;/TitleParameterDiv&gt;

        &lt;NavDiv&gt;
          &lt;select
            id=&quot;operate_drawer&quot;
            style={{ borderRadius: &quot;0.375rem&quot;, padding: &quot;0.5rem&quot; }}
            onChange={handleActionChange}
            value={formParams.parameter[key] || &quot;&quot;}
          &gt;
            &lt;option value=&quot;&quot;&gt;Ação&lt;/option&gt;
            &lt;option value=&quot;open&quot;&gt;Abrir&lt;/option&gt;
            &lt;option value=&quot;close&quot;&gt;Fechar&lt;/option&gt;
          &lt;/select&gt;
        &lt;/NavDiv&gt;
      &lt;/ParameterDiv&gt;
    );
  }
};

const renderWaypointInputs = () =&gt; {
  if (selectedSkill === &quot;navigation&quot; &amp;&amp; formParams.parameter.waypoints) {
    return formParams.parameter.waypoints.map((waypoint, index) =&gt; (
      &lt;div key={index}&gt;
        &lt;WaypointsContentDiv&gt;
          &lt;WaypointDiv&gt;
            &lt;input
              style={{
                borderRadius: &quot;0.375rem&quot;,
                padding: &quot;0.5rem&quot;,
              }}
              value={waypoint.x || &quot;&quot;}
              type=&quot;number&quot;
              placeholder=&quot;x&quot;
              onChange={(e) =&gt;
                handleWaypointChange(index, &quot;x&quot;, e.target.value)
              }
            /&gt;
          &lt;/WaypointDiv&gt;
          &lt;WaypointDiv&gt;
            &lt;input
              style={{ borderRadius: &quot;0.375rem&quot;, padding: &quot;0.5rem&quot; }}
              type=&quot;number&quot;
              placeholder=&quot;y&quot;
              value={waypoint.y || &quot;&quot;}
              onChange={(e) =&gt;
                handleWaypointChange(index, &quot;y&quot;, e.target.value)
              }
            /&gt;
          &lt;/WaypointDiv&gt;
          &lt;WaypointDiv&gt;
            &lt;input
              style={{
                borderRadius: &quot;0.375rem&quot;,
                padding: &quot;0.5rem&quot;,
              }}
              type=&quot;number&quot;
              placeholder=&quot;z&quot;
              value={waypoint.z || &quot;&quot;}
              onChange={(e) =&gt;
                handleWaypointChange(index, &quot;z&quot;, e.target.value)
              }
            /&gt;
          &lt;/WaypointDiv&gt;
        &lt;/WaypointsContentDiv&gt;
      &lt;/div&gt;
    ));
  }
};

return &lt;div&gt;{renderFormInputs()}&lt;/div&gt;;</pre>

<p>};</p>

<p>export default LocalPlanForm;</p>

</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.6.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

